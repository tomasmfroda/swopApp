import _regeneratorRuntime from "/Users/william/Dropbox/redux-tools/node_modules/@babel/runtime/regenerator";

/* eslint consistent-return:off */
import { call, put } from 'redux-saga/effects';
import actions from './actions';

var safely = function safely(fn) {
  return (
    /*#__PURE__*/
    _regeneratorRuntime.mark(function wrappedSafely() {
      var _len,
          args,
          _key,
          result,
          _args = arguments;

      return _regeneratorRuntime.wrap(function wrappedSafely$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              for (_len = _args.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = _args[_key];
              }

              _context.prev = 1;
              _context.next = 4;
              return call.apply(void 0, [fn].concat(args));

            case 4:
              result = _context.sent;
              return _context.abrupt("return", result);

            case 8:
              _context.prev = 8;
              _context.t0 = _context["catch"](1);
              _context.next = 12;
              return put(actions.safelyFailure({
                args: args,
                error: _context.t0
              }));

            case 12:
            case "end":
              return _context.stop();
          }
        }
      }, wrappedSafely, this, [[1, 8]]);
    })
  );
};

export default safely;